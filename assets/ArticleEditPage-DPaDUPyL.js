import{r as D,m as K,j as S,d as I,u as T,e as h,p as C,q as E,c as g,a as e,t as n,b as t,s as F,h as d,w as c,v as u,x as M,F as k,f as x,l as R,o as v}from"./vue-vendor-BLy7Ta_u.js";import{u as B,c as N,g as O,_ as W}from"./_plugin-vue_export-helper-BkCLdZia.js";const j=()=>{const y=S(),f=D(!1),l=K({title:"",description:"",content:"",categoryKey:"dit",tag:"",badge:"",date:new Date().toISOString().split("T")[0],platform:"Wechat",cover:"linear-gradient(135deg, #0a0f26 0%, #0c1a4d 35%, #032c5f 65%, #0c1a4d 100%)"}),a=()=>{l.title="",l.description="",l.content="",l.categoryKey="dit",l.tag="",l.badge="",l.date=new Date().toISOString().split("T")[0],l.platform="Wechat",l.cover="linear-gradient(135deg, #0a0f26 0%, #0c1a4d 35%, #032c5f 65%, #0c1a4d 100%)"},p=i=>{l.id=i.id,l.title=i.title,l.description=i.description,l.content=i.content,l.categoryKey=i.categoryKey,l.tag=i.tag,l.badge=i.badge,l.date=i.date,l.platform=i.platform,l.cover=i.cover},m=()=>!(!l.title?.trim()||!l.description?.trim()||!l.content?.trim()||!l.categoryKey||!l.tag?.trim()||!l.date||!l.platform?.trim()||!l.cover?.trim()),r=async()=>{if(!m())return null;f.value=!0;try{let i;return l.id?i=B(l.id,l):i=N(l),i}finally{f.value=!1}};return{form:l,isSubmitting:f,resetForm:a,loadArticle:p,validateForm:m,handleSubmit:r,handleSubmitAndRedirect:async()=>{const i=await r();i&&y.push({name:"articleDetail",params:{id:i.id}})}}},z={class:"layout edit-layout"},H={class:"hero"},L={class:"edit-content"},$={class:"form-section"},G={class:"form-label"},J=["placeholder"],Q={class:"form-section"},X={class:"form-label"},Y=["placeholder"],Z={class:"form-row"},ee={class:"form-section"},te={class:"form-label"},le=["value"],se={class:"form-section"},ae={class:"form-label"},oe=["placeholder"],re={class:"form-row"},ie={class:"form-section"},ne={class:"form-label"},de={class:"form-section"},ce={class:"form-label"},ue=["placeholder"],pe={class:"form-row"},me={class:"form-section"},fe={class:"form-label"},be=["placeholder"],ge={class:"form-section"},ve={class:"form-label"},_e=["placeholder"],he={class:"form-section"},ye={class:"form-label"},qe={class:"cover-presets"},ke=["onClick"],xe={class:"form-section"},Se={class:"form-label"},Ae=["placeholder"],we={class:"form-hint"},Pe={class:"form-actions"},Ve=["disabled"],Ue=I({__name:"ArticleEditPage",setup(y){const f=C(),l=S(),{t:a}=T(),p=h(()=>!!f.params.id),m=h(()=>{const b=f.params.id;return b?Number(b):null}),{form:r,isSubmitting:_,loadArticle:i,handleSubmitAndRedirect:q,resetForm:A}=j(),w=h(()=>[{key:"dit",label:a("categories.dit")},{key:"luna",label:a("categories.luna")},{key:"note",label:a("categories.note")},{key:"art",label:a("categories.art")},{key:"travel",label:a("categories.travel")}]),P=["linear-gradient(135deg, #0a0f26 0%, #0c1a4d 35%, #032c5f 65%, #0c1a4d 100%)","linear-gradient(135deg, #0d121f 0%, #132642 50%, #243c5a 100%)","linear-gradient(135deg, #101820 0%, #1f1f2f 50%, #2c2c3b 100%)","linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%)","linear-gradient(135deg, #2d1b69 0%, #11998e 100%)","linear-gradient(135deg, #667eea 0%, #764ba2 100%)"];E(()=>{if(p.value&&m.value){const b=O(m.value);b?i(b):l.push({name:"articles"})}else A()});const V=()=>{p.value&&m.value?l.push({name:"articleDetail",params:{id:m.value}}):l.push({name:"articles"})};return(b,s)=>(v(),g("main",z,[e("section",H,[e("h1",null,n(p.value?t(a)("article.editTitle"):t(a)("article.createTitle")),1),e("p",null,n(p.value?t(a)("article.editDesc"):t(a)("article.createDesc")),1)]),e("section",L,[e("form",{class:"article-form",onSubmit:s[9]||(s[9]=F((...o)=>t(q)&&t(q)(...o),["prevent"]))},[e("div",$,[e("label",G,[d(n(t(a)("article.title"))+" ",1),s[10]||(s[10]=e("span",{class:"required"},"*",-1)),c(e("input",{"onUpdate:modelValue":s[0]||(s[0]=o=>t(r).title=o),type:"text",required:"",placeholder:t(a)("article.titlePlaceholder")},null,8,J),[[u,t(r).title]])])]),e("div",Q,[e("label",X,[d(n(t(a)("article.description"))+" ",1),s[11]||(s[11]=e("span",{class:"required"},"*",-1)),c(e("textarea",{"onUpdate:modelValue":s[1]||(s[1]=o=>t(r).description=o),rows:"3",required:"",placeholder:t(a)("article.descriptionPlaceholder")},null,8,Y),[[u,t(r).description]])])]),e("div",Z,[e("div",ee,[e("label",te,[d(n(t(a)("article.category"))+" ",1),s[12]||(s[12]=e("span",{class:"required"},"*",-1)),c(e("select",{"onUpdate:modelValue":s[2]||(s[2]=o=>t(r).categoryKey=o),required:""},[(v(!0),g(k,null,x(w.value,o=>(v(),g("option",{key:o.key,value:o.key},n(o.label),9,le))),128))],512),[[M,t(r).categoryKey]])])]),e("div",se,[e("label",ae,[d(n(t(a)("article.tag"))+" ",1),s[13]||(s[13]=e("span",{class:"required"},"*",-1)),c(e("input",{"onUpdate:modelValue":s[3]||(s[3]=o=>t(r).tag=o),type:"text",required:"",placeholder:t(a)("article.tagPlaceholder")},null,8,oe),[[u,t(r).tag]])])])]),e("div",re,[e("div",ie,[e("label",ne,[d(n(t(a)("article.date"))+" ",1),s[14]||(s[14]=e("span",{class:"required"},"*",-1)),c(e("input",{"onUpdate:modelValue":s[4]||(s[4]=o=>t(r).date=o),type:"date",required:""},null,512),[[u,t(r).date]])])]),e("div",de,[e("label",ce,[d(n(t(a)("article.platform"))+" ",1),s[15]||(s[15]=e("span",{class:"required"},"*",-1)),c(e("input",{"onUpdate:modelValue":s[5]||(s[5]=o=>t(r).platform=o),type:"text",required:"",placeholder:t(a)("article.platformPlaceholder")},null,8,ue),[[u,t(r).platform]])])])]),e("div",pe,[e("div",me,[e("label",fe,[d(n(t(a)("article.badge"))+" ",1),c(e("input",{"onUpdate:modelValue":s[6]||(s[6]=o=>t(r).badge=o),type:"text",placeholder:t(a)("article.badgePlaceholder")},null,8,be),[[u,t(r).badge]])])]),e("div",ge,[e("label",ve,[d(n(t(a)("article.cover"))+" ",1),s[16]||(s[16]=e("span",{class:"required"},"*",-1)),c(e("input",{"onUpdate:modelValue":s[7]||(s[7]=o=>t(r).cover=o),type:"text",required:"",placeholder:t(a)("article.coverPlaceholder")},null,8,_e),[[u,t(r).cover]])])])]),e("div",he,[e("label",ye,[d(n(t(a)("article.coverPresets"))+" ",1),e("div",qe,[(v(),g(k,null,x(P,(o,U)=>e("button",{key:U,type:"button",class:"cover-preset",style:R({background:o}),onClick:De=>t(r).cover=o},null,12,ke)),64))])])]),e("div",xe,[e("label",Se,[d(n(t(a)("article.content"))+" ",1),s[17]||(s[17]=e("span",{class:"required"},"*",-1)),c(e("textarea",{"onUpdate:modelValue":s[8]||(s[8]=o=>t(r).content=o),rows:"20",required:"",placeholder:t(a)("article.contentPlaceholder"),class:"content-textarea"},null,8,Ae),[[u,t(r).content]])]),e("p",we,n(t(a)("article.contentHint")),1)]),e("div",Pe,[e("button",{type:"button",class:"cancel-btn",onClick:V},n(t(a)("article.cancel")),1),e("button",{type:"submit",class:"submit-btn",disabled:t(_)},n(t(_)?t(a)("article.saving"):p.value?t(a)("article.update"):t(a)("article.publish")),9,Ve)])],32)])]))}}),Te=W(Ue,[["__scopeId","data-v-e862fd70"]]);export{Te as default};
