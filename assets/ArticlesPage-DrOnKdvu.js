import{r as w,c as y,d as S,u as K,a as d,b as e,j as k,t as u,g as C,e as v,F as $,h as x,i as g,w as H,k as E,l as U,v as j,m as z,p as N,q as O,s as Q,f as G}from"./vue-vendor-D3XWct0c.js";import{a as L}from"./index-BHQOpO3A.js";import{u as J}from"./useCategories-BYgl4rKb.js";import{g as W}from"./coverStyle-BhxAb7xK.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./math-vendor-HGAuMS-A.js";import"./markdown-vendor-BDlm1NQN.js";const X=i=>{const m=w(""),f=(c,n)=>{if(!n.trim())return c;const b=new RegExp(`(${n})`,"gi");return c.replace(b,"<mark>$1</mark>")},_=y(()=>{const c=m.value.trim().toLowerCase();return c?i.filter(n=>[n.title,n.description,n.content,n.tag,n.categoryKey].join(" ").toLowerCase().includes(c)):i}),r=y(()=>{const c=m.value.trim();return c?_.value.map(n=>({...n,highlightedTitle:f(n.title,c),highlightedDescription:f(n.description,c)})):[]});return{searchQuery:m,searchResults:_,highlightedResults:r,clearSearch:()=>{m.value=""}}},Y={class:"pagination"},Z={class:"pagination-controls"},ee={key:0,class:"total-items"},te={key:1,class:"pagination-buttons"},se=["disabled"],ae={class:"page-numbers"},ne=["disabled","onClick"],oe=["disabled"],le={class:"items-per-page"},ie=["value"],re=["value"],ce=S({__name:"Pagination",props:{currentPage:{default:1},totalPages:{default:1},totalItems:{default:0},itemsPerPage:{default:5},itemsPerPageOptions:{default:()=>[5,10,20,50]}},emits:["update:currentPage","update:itemsPerPage","page-change"],setup(i,{emit:m}){const{t:f}=K(),_=i,r=m,T=y(()=>{const t=[],h=_.totalPages,o=_.currentPage;if(h<=7)for(let l=1;l<=h;l++)t.push(l);else if(o<=3){for(let l=1;l<=4;l++)t.push(l);t.push("..."),t.push(h)}else if(o>=h-2){t.push(1),t.push("...");for(let l=h-3;l<=h;l++)t.push(l)}else{t.push(1),t.push("...");for(let l=o-1;l<=o+1;l++)t.push(l);t.push("..."),t.push(h)}return t}),c=t=>{typeof t=="number"&&t>=1&&t<=_.totalPages&&(r("update:currentPage",t),r("page-change",t),window.scrollTo({top:0,behavior:"smooth"}))},n=()=>{if(_.currentPage>1){const t=_.currentPage-1;r("update:currentPage",t),r("page-change",t),window.scrollTo({top:0,behavior:"smooth"})}},b=()=>{if(_.currentPage<_.totalPages){const t=_.currentPage+1;r("update:currentPage",t),r("page-change",t),window.scrollTo({top:0,behavior:"smooth"})}},D=t=>{const h=t.target,o=parseInt(h.value,10);r("update:itemsPerPage",o),r("update:currentPage",1),r("page-change",1),window.scrollTo({top:0,behavior:"smooth"})};return(t,h)=>(g(),d("div",Y,[e("div",Z,[i.totalItems>0?(g(),d("div",ee," å…± "+u(i.totalItems)+" æ¡ ",1)):k("",!0),i.totalPages>1?(g(),d("div",te,[e("button",{class:C(["page-btn",{disabled:i.currentPage===1}]),disabled:i.currentPage===1,onClick:n},u(v(f)("pagination.prev")),11,se),e("div",ae,[(g(!0),d($,null,x(T.value,o=>(g(),d("button",{key:o,class:C(["page-number",{active:o===i.currentPage,ellipsis:o==="..."}]),disabled:o==="...",onClick:l=>c(o)},u(o),11,ne))),128))]),e("button",{class:C(["page-btn",{disabled:i.currentPage===i.totalPages}]),disabled:i.currentPage===i.totalPages,onClick:b},u(v(f)("pagination.next")),11,oe)])):k("",!0),e("div",le,[e("select",{value:i.itemsPerPage,class:"items-per-page-select",onChange:D},[(g(!0),d($,null,x(i.itemsPerPageOptions,o=>(g(),d("option",{key:o,value:o},u(o)+" / page ",9,re))),128))],40,ie)])])]))}}),ue=M(ce,[["__scopeId","data-v-6c653ad1"]]),de={class:"layout"},ge={class:"content"},he={class:"sidebar"},pe={class:"filter-title"},ve={class:"category-list"},me=["onClick"],_e={class:"category-label"},Pe={class:"category-count"},fe={class:"article-area"},ye={class:"search-section"},be={class:"search-box"},ke=["placeholder"],we={class:"list-header"},Ce={class:"article-count"},Te={key:0,class:"search-hint"},$e={class:"header-actions"},xe={class:"articles"},De=["onClick","onKeyup"],Ie={key:0,class:"badge"},Re={class:"card-body"},Ae={class:"tag-row"},Le={class:"tag"},Ne=["innerHTML"],Se=["innerHTML"],Ke={class:"meta"},Me={key:0,class:"empty-state"},Ve=S({__name:"ArticlesPage",setup(i){const{t:m}=K(),f=O(),{categories:_}=J(!0),r=w("all"),T=y(()=>{const p={};return p.all=L.length,_.value.forEach(a=>{a.key!=="all"&&(p[a.key]=L.filter(s=>s.categoryKey===a.key).length)}),p}),c=w(!0),{searchQuery:n,searchResults:b,highlightedResults:D}=X(L),t=w(5),h=w(1),o=p=>{f.push({name:"articleDetail",params:{id:p}})},l=()=>{f.push({name:"articleNew"})},I=y(()=>{let p=b.value;return r.value!=="all"&&(p=p.filter(a=>a.categoryKey===r.value)),p.slice().sort((a,s)=>{const P=new Date(a.date).getTime()-new Date(s.date).getTime();return c.value?-P:P})}),R=y(()=>{const p=n.value.trim();let a=I.value;return p&&(a=a.map(s=>{const P=D.value.find(F=>F.id===s.id);return P?{...s,highlightedTitle:P.highlightedTitle,highlightedDescription:P.highlightedDescription}:s})),a}),V=y(()=>{const p=(h.value-1)*t.value,a=p+t.value;return R.value.slice(p,a)}),q=y(()=>Math.ceil(R.value.length/t.value)),A=()=>{h.value=1};H([n,r,c],()=>{A()});const B=()=>{c.value=!c.value,A()};return(p,a)=>(g(),d("main",de,[e("section",ge,[e("aside",he,[e("div",pe,[a[4]||(a[4]=e("span",{class:"filter-icon"},"âŒ˜",-1)),e("span",null,u(v(m)("filter.category")),1)]),e("div",ve,[(g(!0),d($,null,x(v(_),s=>(g(),d("button",{key:s.key,class:C(["category-item",{active:r.value===s.key}]),type:"button",onClick:P=>{r.value=s.key,A()}},[e("span",_e,u(s.label),1),e("span",Pe,"("+u(T.value[s.key]||0)+")",1)],10,me))),128))])]),e("section",fe,[e("div",ye,[e("div",be,[a[5]||(a[5]=e("span",{class:"search-icon"},"ðŸ”",-1)),U(e("input",{"onUpdate:modelValue":a[0]||(a[0]=s=>z(n)?n.value=s:null),type:"text",class:"search-input",placeholder:v(m)("search.placeholder")},null,8,ke),[[j,v(n)]]),v(n)?(g(),d("button",{key:0,class:"clear-btn",type:"button",onClick:a[1]||(a[1]=s=>n.value="")}," Ã— ")):k("",!0)])]),e("div",we,[e("div",Ce,[N(u(v(m)("articles.count",{count:I.value.length}))+" ",1),v(n)?(g(),d("span",Te,u(v(m)("search.results",{query:v(n)})),1)):k("",!0)]),e("div",$e,[e("button",{class:"new-article-btn",type:"button",onClick:l}," + "+u(v(m)("article.new")),1),e("button",{class:"sort-btn",type:"button",onClick:B},[N(u(v(m)("actions.sortByTime"))+" ",1),e("span",{class:C(["arrow",{rotated:!c.value}])},"âŒ„",2)])])]),e("div",xe,[(g(!0),d($,null,x(V.value,s=>(g(),d("article",{key:s.id,class:"article-card",role:"button",tabindex:"0",onClick:P=>o(s.id),onKeyup:Q(P=>o(s.id),["enter"])},[e("div",{class:"card-cover",style:G(v(W)(s.cover))},[s.badge?(g(),d("span",Ie,u(s.badge),1)):k("",!0)],4),e("div",Re,[e("div",Ae,[e("span",Le,u(s.tag),1)]),e("span",{class:"title",innerHTML:s.highlightedTitle||s.title},null,8,Ne),e("p",{class:"description",innerHTML:s.highlightedDescription||s.description},null,8,Se),e("div",Ke,[e("span",null,u(s.date),1),a[6]||(a[6]=e("span",{class:"dot"},"Â·",-1)),e("span",null,u(s.platform),1)])])],40,De))),128)),I.value.length===0?(g(),d("div",Me,[e("p",null,u(v(m)("search.noResults")),1)])):k("",!0)]),E(ue,{"current-page":h.value,"onUpdate:currentPage":a[2]||(a[2]=s=>h.value=s),"items-per-page":t.value,"onUpdate:itemsPerPage":a[3]||(a[3]=s=>t.value=s),"total-pages":q.value,"total-items":R.value.length,"items-per-page-options":[5,10,20,50]},null,8,["current-page","items-per-page","total-pages","total-items"])])])]))}}),ze=M(Ve,[["__scopeId","data-v-6591faa8"]]);export{ze as default};
