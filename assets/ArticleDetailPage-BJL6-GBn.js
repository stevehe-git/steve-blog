import{c as T,r as G,d as $,u as B,a as b,b as a,j as E,t as d,e as C,F,i as _,n as I,o as J,w as H,f as K,h as U,x as Q,z as X,p as N,l as O,v as V,y as Z,G as A,q as R}from"./vue-vendor-9rRcMNhA.js";import{u as ee,g as te,a as D}from"./index-DE2n36Ie.js";import{r as oe,g as P,a as re,M as ne,i as ae}from"./markdown-vendor-BDlm1NQN.js";import{H as z}from"./highlight-vendor-2JJYcUgK.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{b8 as j,b9 as se}from"./math-vendor-CRlGcqsZ.js";import{g as ce}from"./coverStyle-BhxAb7xK.js";var le=oe();const ie=P(le),S=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");var de=re();const ue=P(de),me=e=>e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-"),M=new ne({html:!0,linkify:!0,typographer:!0,breaks:!0,highlight:function(e,o){if(o==="flowchart"||o==="flow")return'<div class="flowchart-container"><pre class="flowchart" id="'+("flowchart-"+Math.random().toString(36).substr(2,9))+'">'+S(e)+"</pre></div>";if(o==="mermaid"||o==="sequenceDiagram"||o==="classDiagram"||o==="stateDiagram"||o==="erDiagram"||o==="journey"||o==="gantt"||o==="pie"||o==="requirement"||o==="gitgraph"||o==="mindmap"||o==="timeline")return'<div class="mermaid-container"><pre class="mermaid" id="'+("mermaid-"+Math.random().toString(36).substr(2,9))+'">'+S(e)+"</pre></div>";if(o&&z.getLanguage(o))try{return'<pre class="hljs"><code class="language-'+S(o)+'">'+z.highlight(e,{language:o}).value+"</code></pre>"}catch{}return'<pre class="hljs"><code>'+S(e)+"</code></pre>"}});M.use(ae);M.use(ie);M.use(ue,{enabled:!0,label:!0,labelAfter:!0});const W=e=>{if(!e||!Array.isArray(e))return"";let o="";for(const r of e)r?.type==="text"&&r.content||r?.type==="code_inline"&&r.content?o+=r.content:r?.children&&(o+=W(r.children));return o};M.use(function(e){const o=e.renderer.rules.heading_open||function(r,u,f,s,l){return l.renderToken(r,u,f)};e.renderer.rules.heading_open=function(r,u,f,s,l){const h=r[u];if(!h)return o(r,u,f,s,l);const g=parseInt(h.tag.slice(1));let n="",t=u+1;for(;t<r.length&&r[t]?.type!=="heading_close";){const p=r[t];if(p?.type==="inline"){p.children?n=W(p.children):n=p.content||"";break}t++}const c=me(n),m=s.headingCount||{},i=m[c]||0;m[c]=i+1;const v=i?`${c}-${i}`:c;return s.toc||(s.toc=[]),s.toc.push({id:v,text:n,level:g}),h.attrSet("id",v),o(r,u,f,s,l)}});const pe=e=>{const o={toc:[],headingCount:{}};return{html:M.render(e,o),toc:o.toc||[]}},he=e=>T(()=>pe(e.value||"")),fe=(e="article-comments")=>{const o=G({}),r=()=>{try{const l=localStorage.getItem(e);o.value=l?JSON.parse(l):{}}catch{o.value={}}},u=()=>{localStorage.setItem(e,JSON.stringify(o.value))};return{commentsMap:o,loadComments:r,getComments:l=>o.value[l]??[],addComment:(l,h)=>{const g=h.content.trim();if(!g)return;const n=h.author?.trim()||"匿名",t=o.value[l]??[],c={id:Date.now(),author:n,content:g,createdAt:new Date().toISOString()};return o.value={...o.value,[l]:[...t,c]},u(),c}}},ve={class:"hero detail-hero"},ge={class:"header-actions"},Ce={key:0,class:"title-area"},ye={key:0,class:"badge"},be={class:"meta"},_e={key:1,class:"title-area"},ke={class:"meta"},we=$({__name:"ArticleHeader",props:{article:{}},emits:["goBack","edit"],setup(e,{emit:o}){const r=o,{t:u}=B();return(f,s)=>(_(),b("section",ve,[a("div",ge,[a("button",{class:"back-btn",type:"button",onClick:s[0]||(s[0]=l=>r("goBack"))},"← "+d(C(u)("article.back")),1),e.article?(_(),b("button",{key:0,class:"edit-btn",type:"button",onClick:s[1]||(s[1]=l=>r("edit"))},"✎ "+d(C(u)("article.edit")),1)):E("",!0)]),e.article?(_(),b("div",Ce,[e.article.badge?(_(),b("span",ye,d(e.article.badge),1)):E("",!0),a("h1",null,d(e.article.title),1),a("p",be,[a("span",null,d(C(u)("article.created"))+": "+d(e.article.date),1),e.article.updatedDate?(_(),b(F,{key:0},[s[2]||(s[2]=a("span",{class:"dot"},"·",-1)),a("span",null,d(C(u)("article.updated"))+": "+d(e.article.updatedDate),1)],64)):E("",!0),s[3]||(s[3]=a("span",{class:"dot"},"·",-1)),a("span",null,d(e.article.platform),1),s[4]||(s[4]=a("span",{class:"dot"},"·",-1)),a("span",null,d(e.article.tag),1)])])):(_(),b("div",_e,[a("h1",null,d(C(u)("article.notFound")),1),a("p",ke,d(C(u)("article.notFoundDesc")),1)]))]))}}),xe=L(we,[["__scopeId","data-v-e5ee6f86"]]),Te=(e,o)=>{const u=o||(n=>({copy:"复制",copied:"已复制!",copyFailed:"复制失败",copyCode:"复制代码"})[n]||n),f=n=>{const t=n.textContent;n.textContent=u("copied"),n.classList.add("copied"),setTimeout(()=>{n.textContent=t,n.classList.remove("copied")},2e3)},s=n=>{const t=n.textContent;n.textContent=u("copyFailed"),n.classList.add("error"),setTimeout(()=>{n.textContent=t,n.classList.remove("error")},2e3)},l=async(n,t)=>{if(!navigator.clipboard||!navigator.clipboard.writeText){console.error("Clipboard API 不可用"),s(t);return}try{await navigator.clipboard.writeText(n),f(t)}catch(c){console.error("复制失败:",c),s(t)}},h=n=>{const t=document.createElement("button");return t.className="copy-code-btn",t.textContent=u("copy"),t.type="button",t.setAttribute("aria-label",u("copyCode")),t.addEventListener("click",()=>{l(n,t)}),t};return{addCopyButtons:()=>{I(()=>{if(!e.value)return;e.value.querySelectorAll("pre.hljs").forEach(t=>{if(t.querySelector(".copy-code-btn"))return;const c=t.querySelector("code");if(!c)return;const m=c.textContent||c.innerText||"",i=h(m);t.appendChild(i)})})}}},Se=e=>{let o=!1,r="default";const u=()=>document.documentElement.classList.contains("dark")?"dark":"default",f=(t=!1)=>{const c=u();(t||!o||r!==c)&&(j.initialize({startOnLoad:!1,theme:c,securityLevel:"loose",themeVariables:c==="dark"?{primaryColor:"#2a2a2a",primaryTextColor:"#e0e0e0",primaryBorderColor:"#e0e0e0",lineColor:"#e0e0e0",secondaryColor:"#1a1a1a",tertiaryColor:"#333",background:"#1e1e1e",mainBkg:"#2a2a2a",secondBkg:"#1a1a1a",textColor:"#e0e0e0",border1:"#e0e0e0",border2:"#9ca3af",noteBkgColor:"#2a2a2a",noteTextColor:"#e0e0e0",noteBorderColor:"#e0e0e0",actorBorder:"#e0e0e0",actorBkg:"#2a2a2a",actorTextColor:"#e0e0e0",actorLineColor:"#e0e0e0",labelBoxBkgColor:"#2a2a2a",labelBoxBorderColor:"#e0e0e0",labelTextColor:"#e0e0e0",loopTextColor:"#e0e0e0",activationBorderColor:"#e0e0e0",activationBkgColor:"#1a1a1a",sequenceNumberColor:"#e0e0e0",sectionBkgColor:"#2a2a2a",altBkgColor:"#1a1a1a",clusterBkg:"#2a2a2a",clusterBorder:"#e0e0e0",defaultLinkColor:"#e0e0e0",titleColor:"#e0e0e0",edgeLabelBackground:"#2a2a2a",compositeBackground:"#2a2a2a",compositeTitleBackground:"#1a1a1a",compositeBorder:"#e0e0e0",stateLabelColor:"#e0e0e0",stateBkg:"#2a2a2a",labelBorderColor:"#e0e0e0",errorBkgColor:"#4a1a1a",errorTextColor:"#ff6b6b"}:void 0}),o=!0,r=c)},s=new WeakMap,l=(t,c=!1)=>{const m=t.id||"mermaid-"+Math.random().toString(36).substr(2,9),i=t.parentElement?.classList.contains("mermaid-container")?t.parentElement:null;let v="";if(v=t.textContent||"",!v.trim()&&c&&i&&s.has(i)&&(v=s.get(i)||""),v.trim()&&i&&!s.has(i)&&s.set(i,v),!v.trim()||t.classList.contains("mermaid-rendered")&&!c)return;t.classList.add("mermaid-rendered");const p=m+"-svg";j.render(p,v).then(y=>{const w=t.parentElement;w&&w.classList.contains("mermaid-container")?w.innerHTML=y.svg:t.innerHTML=y.svg}).catch(y=>{console.error("Mermaid 渲染失败:",y),h(t,v)})},h=(t,c)=>{const m=t.parentElement;m&&m.classList.contains("mermaid-container")&&(m.innerHTML='<pre class="mermaid-error">'+S(c)+"</pre>")},g=(t=!1)=>{I(()=>{if(!e.value)return;const c=u();t||r!==c?f(!0):f();const m=".mermaid-container",i=e.value.querySelectorAll(m);t&&i.forEach(p=>{if(p.querySelector("svg")&&s.has(p)){const w=s.get(p)||"",x="mermaid-"+Math.random().toString(36).substr(2,9);w&&(p.innerHTML=`<pre class="mermaid" id="${x}">${w}</pre>`)}}),setTimeout(()=>{if(!e.value)return;e.value.querySelectorAll(m).forEach(x=>{const k=x.querySelector("pre.mermaid");k&&l(k,t)});const y=t?"pre.mermaid":"pre.mermaid:not(.mermaid-rendered)";e.value.querySelectorAll(y).forEach(x=>{x.closest(".mermaid-container")||l(x,t)})},t?50:0)})};return{initMermaid:g,rerenderMermaid:()=>{g(!0)}}};var Ee=se();const $e=P(Ee),Be=e=>{const o=new WeakMap,r=()=>{const n=document.documentElement.classList.contains("dark");return{textColor:n?"#e0e0e0":"#000000",lineColor:n?"#e0e0e0":"#000000",fillColor:n?"#2a2a2a":"#ffffff",isDark:n}},u=()=>{const{textColor:n,lineColor:t,fillColor:c,isDark:m}=r();return{"line-width":2,"line-length":50,"text-margin":10,"font-size":14,"font-color":n,"line-color":t,"element-color":n,fill:c,"yes-text":"yes","no-text":"no","arrow-end":"block",scale:1,flowstate:{past:{fill:m?"#444444":"#CCCCCC","font-size":12},current:{fill:m?"#4a4a00":"yellow","font-color":m?"#ff6b6b":"red","font-weight":"bold"},future:{fill:m?"#666600":"#FFFF99"},request:{fill:m?"#003366":"blue"},invalid:{fill:m?"#222222":"#444444"},approved:{fill:"#58C4A3","font-size":12,"yes-text":"APPROVED","no-text":"n/a"},rejected:{fill:"#C45879","font-size":12,"yes-text":"n/a","no-text":"REJECTED"}}}},f=n=>{const t=document.createElement("div");return t.className="flowchart-svg-container",t.id=n+"-svg",t},s=(n,t=!1)=>{const c=n.id||"flowchart-"+Math.random().toString(36).substr(2,9),m=n.parentElement?.classList.contains("flowchart-container")?n.parentElement:null;let i="";if(i=n.textContent||"",!i.trim()&&t&&m&&o.has(m)&&(i=o.get(m)||""),i.trim()&&m&&!o.has(m)&&o.set(m,i),!!i.trim()&&!(n.classList.contains("flowchart-rendered")&&!t)){n.classList.add("flowchart-rendered");try{const v=$e.parse(i),p=f(c),y=n.parentElement;if(y&&y.classList.contains("flowchart-container")){y.innerHTML="",y.appendChild(p);const w=u();v.drawSVG(c+"-svg",w)}}catch(v){console.error("Flowchart 渲染失败:",v),l(n,i)}}},l=(n,t)=>{const c=n.parentElement;c&&c.classList.contains("flowchart-container")&&(c.innerHTML='<pre class="flowchart-error">'+S(t)+"</pre>")},h=(n=!1)=>{I(()=>{if(!e.value)return;const c=e.value.querySelectorAll(".flowchart-container");n&&c.forEach(i=>{if(i.querySelector(".flowchart-svg-container")&&o.has(i)){const p=o.get(i)||"",y="flowchart-"+Math.random().toString(36).substr(2,9);p&&(i.innerHTML=`<pre class="flowchart" id="${y}">${p}</pre>`)}}),setTimeout(()=>{if(!e.value)return;e.value.querySelectorAll(".flowchart-container").forEach(p=>{const y=p.querySelector("pre.flowchart");y&&s(y,n)})},n?50:0)})};return{initFlowchart:h,rerenderFlowchart:()=>{h(!0)}}},Le={class:"article-card detail-card"},Me={key:0,class:"badge"},Ae={class:"card-body"},De={class:"tag-row"},Fe={class:"tag"},Ie={class:"title"},qe={class:"description"},Pe={class:"meta"},He={class:"nav-row"},Ne=["disabled"],Oe=["disabled"],Ve=["innerHTML"],ze=$({__name:"ArticleContent",props:{article:{},htmlContent:{},prevArticle:{},nextArticle:{}},emits:["goPrev","goNext"],setup(e,{emit:o}){const{t:r}=B(),u=ee(),f=e,s=o,l=G(),{addCopyButtons:h}=Te(l,v=>({copy:r("code.copy"),copied:r("code.copied"),copyFailed:r("code.copyFailed"),copyCode:r("code.copyCode")})[v]||v),{initMermaid:g,rerenderMermaid:n}=Se(l),{initFlowchart:t,rerenderFlowchart:c}=Be(l),m=()=>{h(),g(),t(),i()},i=()=>{I(()=>{if(!l.value)return;const v=l.value.querySelectorAll("table"),p=u.isDark||document.documentElement.classList.contains("dark"),w=getComputedStyle(document.documentElement).getPropertyValue("--border").trim()||"#e5e7eb",k=p?"#d1d5db":w;v.forEach(q=>{q.style.setProperty("border",`2px solid ${k}`,"important"),q.querySelectorAll("th, td").forEach(Y=>{Y.style.setProperty("border",`1px solid ${k}`,"important")})})})};return J(()=>{m(),new MutationObserver(()=>{i(),setTimeout(()=>{n(),c()},100)}).observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),setTimeout(()=>{i()},100)}),H(()=>f.htmlContent,()=>{m(),setTimeout(()=>{i()},100)}),H(()=>u.isDark,()=>{setTimeout(()=>{i(),n(),c()},100)}),(v,p)=>(_(),b("article",Le,[a("div",{class:"card-cover",style:K(C(ce)(e.article.cover))},[e.article.badge?(_(),b("span",Me,d(e.article.badge),1)):E("",!0)],4),a("div",Ae,[a("div",De,[a("span",Fe,d(e.article.tag),1)]),a("h2",Ie,d(e.article.title),1),a("p",qe,d(e.article.description),1),a("div",Pe,[a("span",null,d(C(r)("article.created"))+": "+d(e.article.date),1),e.article.updatedDate?(_(),b(F,{key:0},[p[2]||(p[2]=a("span",{class:"dot"},"·",-1)),a("span",null,d(C(r)("article.updated"))+": "+d(e.article.updatedDate),1)],64)):E("",!0),p[3]||(p[3]=a("span",{class:"dot"},"·",-1)),a("span",null,d(e.article.platform),1),p[4]||(p[4]=a("span",{class:"dot"},"·",-1)),a("span",null,d(e.article.tag),1)]),a("div",He,[a("button",{class:"ghost-btn",type:"button",disabled:!e.prevArticle,onClick:p[0]||(p[0]=y=>s("goPrev"))}," ← "+d(C(r)("article.prevArticle")),9,Ne),a("button",{class:"ghost-btn",type:"button",disabled:!e.nextArticle,onClick:p[1]||(p[1]=y=>s("goNext"))},d(C(r)("article.nextArticle"))+" → ",9,Oe)]),a("div",{ref_key:"contentBlockRef",ref:l,class:"content-block",innerHTML:e.htmlContent},null,8,Ve)])]))}}),je=L(ze,[["__scopeId","data-v-b88dd746"]]),Ge={key:0,class:"toc"},Je={class:"toc-title"},Ke=["href","onClick"],Ue=$({__name:"ArticleTOC",props:{toc:{}},setup(e){const{t:o}=B(),r=(u,f)=>{u.preventDefault();const s=document.getElementById(f);if(s){const g=s.getBoundingClientRect().top+window.pageYOffset-100;window.scrollTo({top:g,behavior:"smooth"}),history.replaceState(null,"",`#${f}`)}};return(u,f)=>e.toc.length?(_(),b("aside",Ge,[a("div",Je,d(C(o)("toc.title")),1),a("nav",null,[(_(!0),b(F,null,U(e.toc,s=>(_(),b("a",{key:s.id,class:"toc-item",style:K({paddingLeft:`${(s.level-1)*12}px`}),href:`#${s.id}`,onClick:l=>r(l,s.id)},d(s.text),13,Ke))),128))])])):E("",!0)}}),We=L(Ue,[["__scopeId","data-v-298d8e57"]]),Ye={class:"comments"},Qe={class:"comments__header"},Xe={class:"comments__count"},Ze={key:0,class:"comments__list"},Re={class:"comment__header"},et={class:"comment__author"},tt={class:"comment__time"},ot={class:"comment__content"},rt={key:1,class:"comments__empty"},nt={class:"form-row"},at=["placeholder"],st={class:"form-row"},ct=["placeholder"],lt={class:"submit-btn",type:"submit"},it=$({__name:"CommentSection",props:{comments:{},articleId:{}},emits:["submit"],setup(e,{emit:o}){const{t:r}=B(),u=o,f=Q({author:"",content:""}),s=()=>{const l=f.content.trim();l&&(u("submit",{author:f.author,content:l}),f.author="",f.content="")};return(l,h)=>(_(),b("section",Ye,[a("header",Qe,[a("h3",null,d(C(r)("comments.title")),1),a("span",Xe,d(C(r)("comments.count",{count:e.comments.length})),1)]),e.comments.length?(_(),b("ul",Ze,[(_(!0),b(F,null,U(e.comments,g=>(_(),b("li",{key:g.id,class:"comment"},[a("div",Re,[a("span",et,d(g.author),1),a("span",tt,d(new Date(g.createdAt).toLocaleString()),1)]),a("p",ot,d(g.content),1)]))),128))])):(_(),b("p",rt,d(C(r)("comments.empty")),1)),a("form",{class:"comment-form",onSubmit:X(s,["prevent"])},[a("div",nt,[a("label",null,[N(d(C(r)("comments.authorLabel"))+" ",1),O(a("input",{"onUpdate:modelValue":h[0]||(h[0]=g=>f.author=g),placeholder:C(r)("comments.authorPlaceholder")},null,8,at),[[V,f.author]])])]),a("div",st,[a("label",null,[N(d(C(r)("comments.contentLabel"))+" ",1),O(a("textarea",{"onUpdate:modelValue":h[1]||(h[1]=g=>f.content=g),rows:"4",required:"",placeholder:C(r)("comments.contentPlaceholder")},null,8,ct),[[V,f.content]])])]),a("button",lt,d(C(r)("comments.submit")),1)],32)]))}}),dt=L(it,[["__scopeId","data-v-a9391980"]]),ut={class:"layout detail-layout"},mt={class:"article-area"},pt={key:0,class:"detail-grid"},ht={class:"content-wrapper"},ft={key:1,class:"article-card detail-card empty-state"},vt={class:"card-body"},gt={class:"title"},Ct={class:"description"},yt=$({__name:"ArticleDetailPage",setup(e){const o=Z(),r=R(),{t:u}=B(),{loadComments:f,getComments:s,addComment:l}=fe(),h=T(()=>{const k=o.params.id;return k?te(k)??null:null}),g=T(()=>h.value?.content??""),n=he(g),t=T(()=>h.value?D.findIndex(k=>k.id===h.value?.id):-1),c=T(()=>t.value>0?D[t.value-1]:null),m=T(()=>t.value>=0&&t.value<D.length-1?D[t.value+1]:null),i=T(()=>{const k=h.value?.id;return k?s(k):[]}),v=()=>{r.back()},p=()=>{c.value&&r.push({name:"articleDetail",params:{id:c.value.id}})},y=()=>{m.value&&r.push({name:"articleDetail",params:{id:m.value.id}})},w=()=>{h.value&&r.push({name:"articleEdit",params:{id:h.value.id}})},x=k=>{h.value&&l(h.value.id,k)};return J(()=>{f()}),(k,q)=>(_(),b("main",ut,[A(xe,{article:h.value,onGoBack:v,onEdit:w},null,8,["article"]),a("section",mt,[h.value?(_(),b("div",pt,[a("div",ht,[A(je,{article:h.value,"html-content":C(n).html,"prev-article":c.value??null,"next-article":m.value??null,onGoPrev:p,onGoNext:y},null,8,["article","html-content","prev-article","next-article"]),A(dt,{comments:i.value,"article-id":h.value.id,onSubmit:x},null,8,["comments","article-id"])]),A(We,{toc:C(n).toc},null,8,["toc"])])):(_(),b("article",ft,[a("div",vt,[a("h2",gt,d(C(u)("article.notFound")),1),a("p",Ct,d(C(u)("article.notFoundDesc")),1)])]))])]))}}),Lt=L(yt,[["__scopeId","data-v-266627e9"]]);export{Lt as default};
