import{r as k,c as f,d as S,u as $,a as r,b as e,t as i,e as l,F as C,g as T,w as K,i as m,v as M,j as N,k as D,f as x,l as q,m as B,n as F,h as c}from"./vue-vendor-B1el7s55.js";import{a as H}from"./index-IP7PNPX9.js";import{u as V}from"./useCategories-CHzFovT5.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./math-vendor-C4rbpj_m.js";import"./markdown-vendor-BDlm1NQN.js";const z=b=>{const o=k(""),p=(s,n)=>{if(!n.trim())return s;const v=new RegExp(`(${n})`,"gi");return s.replace(v,"<mark>$1</mark>")},_=f(()=>{const s=o.value.trim().toLowerCase();return s?b.filter(n=>[n.title,n.description,n.content,n.tag,n.categoryKey].join(" ").toLowerCase().includes(s)):b}),h=f(()=>{const s=o.value.trim();return s?_.value.map(n=>({...n,highlightedTitle:p(n.title,s),highlightedDescription:p(n.description,s)})):[]});return{searchQuery:o,searchResults:_,highlightedResults:h,clearSearch:()=>{o.value=""}}},E={class:"layout"},I={class:"content"},P={class:"sidebar"},Q={class:"filter-title"},U={class:"category-list"},G=["onClick"],J={class:"article-area"},O={class:"search-section"},W={class:"search-box"},X=["placeholder"],Y={class:"list-header"},Z={class:"article-count"},ee={key:0,class:"search-hint"},te={class:"header-actions"},se={class:"articles"},ae=["onClick","onKeyup"],ne={key:0,class:"badge"},oe={class:"card-body"},le={class:"tag-row"},ie={class:"tag"},re=["innerHTML"],ce=["innerHTML"],ue={class:"meta"},de={key:0,class:"empty-state"},he=S({__name:"ArticlesPage",setup(b){const{t:o}=$(),p=q(),{categories:_}=V(!0),h=k("all"),g=k(!0),{searchQuery:s,searchResults:n,highlightedResults:v}=z(H),w=u=>{p.push({name:"articleDetail",params:{id:u}})},R=()=>{p.push({name:"articleNew"})},y=f(()=>{let u=n.value;return h.value!=="all"&&(u=u.filter(a=>a.categoryKey===h.value)),u.slice().sort((a,t)=>{const d=new Date(a.date).getTime()-new Date(t.date).getTime();return g.value?-d:d})}),L=f(()=>s.value.trim()?y.value.map(a=>{const t=v.value.find(d=>d.id===a.id);return t?{...a,highlightedTitle:t.highlightedTitle,highlightedDescription:t.highlightedDescription}:a}):y.value),A=()=>{g.value=!g.value};return(u,a)=>(c(),r("main",E,[e("section",I,[e("aside",P,[e("div",Q,[a[2]||(a[2]=e("span",{class:"filter-icon"},"âŒ˜",-1)),e("span",null,i(l(o)("filter.category")),1)]),e("div",U,[(c(!0),r(C,null,T(l(_),t=>(c(),r("button",{key:t.key,class:x(["category-item",{active:h.value===t.key}]),type:"button",onClick:d=>h.value=t.key},i(t.label),11,G))),128))])]),e("section",J,[e("div",O,[e("div",W,[a[3]||(a[3]=e("span",{class:"search-icon"},"ðŸ”",-1)),K(e("input",{"onUpdate:modelValue":a[0]||(a[0]=t=>N(s)?s.value=t:null),type:"text",class:"search-input",placeholder:l(o)("search.placeholder")},null,8,X),[[M,l(s)]]),l(s)?(c(),r("button",{key:0,class:"clear-btn",type:"button",onClick:a[1]||(a[1]=t=>s.value="")}," Ã— ")):m("",!0)])]),e("div",Y,[e("div",Z,[D(i(l(o)("articles.count",{count:y.value.length}))+" ",1),l(s)?(c(),r("span",ee,i(l(o)("search.results",{query:l(s)})),1)):m("",!0)]),e("div",te,[e("button",{class:"new-article-btn",type:"button",onClick:R}," + "+i(l(o)("article.new")),1),e("button",{class:"sort-btn",type:"button",onClick:A},[D(i(l(o)("actions.sortByTime"))+" ",1),e("span",{class:x(["arrow",{rotated:!g.value}])},"âŒ„",2)])])]),e("div",se,[(c(!0),r(C,null,T(L.value,t=>(c(),r("article",{key:t.id,class:"article-card",role:"button",tabindex:"0",onClick:d=>w(t.id),onKeyup:B(d=>w(t.id),["enter"])},[e("div",{class:"card-cover",style:F({background:t.cover})},[t.badge?(c(),r("span",ne,i(t.badge),1)):m("",!0)],4),e("div",oe,[e("div",le,[e("span",ie,i(t.tag),1)]),e("span",{class:"title",innerHTML:t.highlightedTitle||t.title},null,8,re),e("p",{class:"description",innerHTML:t.highlightedDescription||t.description},null,8,ce),e("div",ue,[e("span",null,i(t.date),1),a[4]||(a[4]=e("span",{class:"dot"},"Â·",-1)),e("span",null,i(t.platform),1)])])],40,ae))),128)),y.value.length===0?(c(),r("div",de,[e("p",null,i(l(o)("search.noResults")),1)])):m("",!0)])])])]))}}),fe=j(he,[["__scopeId","data-v-8d08778e"]]);export{fe as default};
