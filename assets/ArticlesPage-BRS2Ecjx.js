import{r as C,c as P,d as V,u as B,a as o,b as e,j as b,t as i,g as D,e as u,F as k,h as T,i as l,w as z,k as Q,l as J,v as W,m as X,p as K,q as Z,s as N,f as S}from"./vue-vendor-9rRcMNhA.js";import{a as H}from"./index-DE2n36Ie.js";import{u as G}from"./useCategories-BHEKPiTV.js";import{g as A}from"./coverStyle-BhxAb7xK.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./math-vendor-CRlGcqsZ.js";import"./markdown-vendor-BDlm1NQN.js";const ee=p=>{const h=C(""),f=(_,r)=>{if(!r.trim())return _;const w=new RegExp(`(${r})`,"gi");return _.replace(w,"<mark>$1</mark>")},y=P(()=>{const _=h.value.trim().toLowerCase();return _?p.filter(r=>[r.title,r.description,r.content,r.tag,r.categoryKey].join(" ").toLowerCase().includes(_)):p}),v=P(()=>{const _=h.value.trim();return _?y.value.map(r=>({...r,highlightedTitle:f(r.title,_),highlightedDescription:f(r.description,_)})):[]});return{searchQuery:h,searchResults:y,highlightedResults:v,clearSearch:()=>{h.value=""}}},te={class:"pagination"},se={class:"pagination-controls"},ae={key:0,class:"total-items"},ne={key:1,class:"pagination-buttons"},le=["disabled"],oe={class:"page-numbers"},ie=["disabled","onClick"],re=["disabled"],ce={class:"items-per-page"},ue=["value"],de=["value"],ge=V({__name:"Pagination",props:{currentPage:{default:1},totalPages:{default:1},totalItems:{default:0},itemsPerPage:{default:5},itemsPerPageOptions:{default:()=>[5,10,20,50]}},emits:["update:currentPage","update:itemsPerPage","page-change"],setup(p,{emit:h}){const{t:f}=B(),y=p,v=h,x=P(()=>{const a=[],m=y.totalPages,c=y.currentPage;if(m<=7)for(let d=1;d<=m;d++)a.push(d);else if(c<=3){for(let d=1;d<=4;d++)a.push(d);a.push("..."),a.push(m)}else if(c>=m-2){a.push(1),a.push("...");for(let d=m-3;d<=m;d++)a.push(d)}else{a.push(1),a.push("...");for(let d=c-1;d<=c+1;d++)a.push(d);a.push("..."),a.push(m)}return a}),_=a=>{typeof a=="number"&&a>=1&&a<=y.totalPages&&(v("update:currentPage",a),v("page-change",a),window.scrollTo({top:0,behavior:"smooth"}))},r=()=>{if(y.currentPage>1){const a=y.currentPage-1;v("update:currentPage",a),v("page-change",a),window.scrollTo({top:0,behavior:"smooth"})}},w=()=>{if(y.currentPage<y.totalPages){const a=y.currentPage+1;v("update:currentPage",a),v("page-change",a),window.scrollTo({top:0,behavior:"smooth"})}},L=a=>{const m=a.target,c=parseInt(m.value,10);v("update:itemsPerPage",c),v("update:currentPage",1),v("page-change",1),window.scrollTo({top:0,behavior:"smooth"})};return(a,m)=>(l(),o("div",te,[e("div",se,[p.totalItems>0?(l(),o("div",ae," å…± "+i(p.totalItems)+" æ¡ ",1)):b("",!0),p.totalPages>1?(l(),o("div",ne,[e("button",{class:D(["page-btn",{disabled:p.currentPage===1}]),disabled:p.currentPage===1,onClick:r},i(u(f)("pagination.prev")),11,le),e("div",oe,[(l(!0),o(k,null,T(x.value,c=>(l(),o("button",{key:c,class:D(["page-number",{active:c===p.currentPage,ellipsis:c==="..."}]),disabled:c==="...",onClick:d=>_(c)},i(c),11,ie))),128))]),e("button",{class:D(["page-btn",{disabled:p.currentPage===p.totalPages}]),disabled:p.currentPage===p.totalPages,onClick:w},i(u(f)("pagination.next")),11,re)])):b("",!0),e("div",ce,[e("select",{value:p.itemsPerPage,class:"items-per-page-select",onChange:L},[(l(!0),o(k,null,T(p.itemsPerPageOptions,c=>(l(),o("option",{key:c,value:c},i(c)+" / page ",9,de))),128))],40,ue)])])]))}}),he=F(ge,[["__scopeId","data-v-6c653ad1"]]),pe={class:"layout"},ve={class:"content"},_e={class:"sidebar"},me={class:"filter-title"},ye={class:"category-list"},be=["onClick"],Pe={class:"category-label"},fe={class:"category-count"},ke={class:"article-area"},we={class:"search-section"},Ce={class:"search-box"},Te=["placeholder"],$e={class:"list-header"},De={class:"article-count"},xe={key:0,class:"search-hint"},Me={class:"header-actions"},Le=["title"],Ie={key:0},Re={key:1},He={key:0,class:"articles"},Ke=["onClick","onKeyup"],Ne={key:0,class:"badge"},Se={class:"card-body"},Ae={class:"tag-row"},Ve={class:"tag"},Be=["innerHTML"],Fe=["innerHTML"],qe={class:"meta"},Ee={key:0,class:"empty-state"},Ye={key:1,class:"timeline-view"},je={class:"timeline-container"},Oe={class:"timeline-year-node"},Ue={class:"year-circle"},ze={class:"timeline-articles"},Qe=["onClick","onKeyup"],Je={class:"timeline-content"},We={key:0,class:"timeline-badge"},Xe={class:"timeline-info"},Ze={class:"timeline-date"},Ge={class:"updated-date"},et=["innerHTML"],tt=["innerHTML"],st={key:0,class:"empty-state"},at=V({__name:"ArticlesPage",setup(p){const{t:h}=B(),f=Z(),{categories:y}=G(!0),v=C("all"),x=P(()=>{const g={};return g.all=H.length,y.value.forEach(s=>{s.key!=="all"&&(g[s.key]=H.filter(t=>t.categoryKey===s.key).length)}),g}),_=C(!0),{searchQuery:r,searchResults:w,highlightedResults:L}=ee(H),a=C(5),m=C(1),c=C("list"),d=g=>{f.push({name:"articleDetail",params:{id:g}})},q=()=>{f.push({name:"articleNew"})},$=P(()=>{let g=w.value;return v.value!=="all"&&(g=g.filter(s=>s.categoryKey===v.value)),g.slice().sort((s,t)=>{const n=new Date(s.date).getTime()-new Date(t.date).getTime();return _.value?-n:n})}),I=P(()=>{const g=r.value.trim();let s=$.value;return g&&(s=s.map(t=>{const n=L.value.find(R=>R.id===t.id);return n?{...t,highlightedTitle:n.highlightedTitle,highlightedDescription:n.highlightedDescription}:t})),s}),E=P(()=>{const g=(m.value-1)*a.value,s=g+a.value;return I.value.slice(g,s)}),Y=P(()=>Math.ceil(I.value.length/a.value)),M=()=>{m.value=1};z([r,v,_],()=>{M()});const j=()=>{_.value=!_.value,M()},O=()=>{c.value=c.value==="list"?"timeline":"list",M()},U=P(()=>{const g={};return $.value.forEach(t=>{const n=new Date(t.date).getFullYear().toString();g[n]||(g[n]=[]),g[n].push(t)}),Object.keys(g).sort((t,n)=>Number(n)-Number(t)).map(t=>({year:t,articles:g[t]}))});return(g,s)=>(l(),o("main",pe,[e("section",ve,[e("aside",_e,[e("div",me,[s[4]||(s[4]=e("span",{class:"filter-icon"},"âŒ˜",-1)),e("span",null,i(u(h)("filter.category")),1)]),e("div",ye,[(l(!0),o(k,null,T(u(y),t=>(l(),o("button",{key:t.key,class:D(["category-item",{active:v.value===t.key}]),type:"button",onClick:n=>{v.value=t.key,M()}},[e("span",Pe,i(t.label),1),e("span",fe,"("+i(x.value[t.key]||0)+")",1)],10,be))),128))])]),e("section",ke,[e("div",we,[e("div",Ce,[s[5]||(s[5]=e("span",{class:"search-icon"},"ðŸ”",-1)),J(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>X(r)?r.value=t:null),type:"text",class:"search-input",placeholder:u(h)("search.placeholder")},null,8,Te),[[W,u(r)]]),u(r)?(l(),o("button",{key:0,class:"clear-btn",type:"button",onClick:s[1]||(s[1]=t=>r.value="")}," Ã— ")):b("",!0)])]),e("div",$e,[e("div",De,[K(i(u(h)("articles.count",{count:$.value.length}))+" ",1),u(r)?(l(),o("span",xe,i(u(h)("search.results",{query:u(r)})),1)):b("",!0)]),e("div",Me,[e("button",{class:"view-toggle-btn",type:"button",onClick:O,title:c.value==="list"?u(h)("actions.timelineView"):u(h)("actions.listView")},[c.value==="list"?(l(),o("span",Ie,"ðŸ“…")):(l(),o("span",Re,"ðŸ“‹"))],8,Le),e("button",{class:"new-article-btn",type:"button",onClick:q}," + "+i(u(h)("article.new")),1),e("button",{class:"sort-btn",type:"button",onClick:j},[K(i(u(h)("actions.sortByTime"))+" ",1),e("span",{class:D(["arrow",{rotated:!_.value}])},"âŒ„",2)])])]),c.value==="list"?(l(),o("div",He,[(l(!0),o(k,null,T(E.value,t=>(l(),o("article",{key:t.id,class:"article-card",role:"button",tabindex:"0",onClick:n=>d(t.id),onKeyup:N(n=>d(t.id),["enter"])},[e("div",{class:"card-cover",style:S(u(A)(t.cover))},[t.badge?(l(),o("span",Ne,i(t.badge),1)):b("",!0)],4),e("div",Se,[e("div",Ae,[e("span",Ve,i(t.tag),1)]),e("span",{class:"title",innerHTML:t.highlightedTitle||t.title},null,8,Be),e("p",{class:"description",innerHTML:t.highlightedDescription||t.description},null,8,Fe),e("div",qe,[e("span",null,i(u(h)("article.created"))+": "+i(t.date),1),t.updatedDate?(l(),o(k,{key:0},[s[6]||(s[6]=e("span",{class:"dot"},"Â·",-1)),e("span",null,i(u(h)("article.updated"))+": "+i(t.updatedDate),1)],64)):b("",!0),s[7]||(s[7]=e("span",{class:"dot"},"Â·",-1)),e("span",null,i(t.platform),1)])])],40,Ke))),128)),$.value.length===0?(l(),o("div",Ee,[e("p",null,i(u(h)("search.noResults")),1)])):b("",!0)])):(l(),o("div",Ye,[e("div",je,[s[11]||(s[11]=e("div",{class:"timeline-line"},null,-1)),(l(!0),o(k,null,T(U.value,t=>(l(),o("div",{key:t.year,class:"timeline-year-group"},[e("div",Oe,[e("div",Ue,i(t.year),1)]),e("div",ze,[(l(!0),o(k,null,T(t.articles,n=>(l(),o("article",{key:n.id,class:"timeline-article",role:"button",tabindex:"0",onClick:R=>d(n.id),onKeyup:N(R=>d(n.id),["enter"])},[s[10]||(s[10]=e("div",{class:"timeline-dot"},null,-1)),e("div",Je,[e("div",{class:"timeline-thumbnail",style:S(u(A)(n.cover))},[n.badge?(l(),o("span",We,i(n.badge),1)):b("",!0)],4),e("div",Xe,[e("div",Ze,[s[9]||(s[9]=e("span",{class:"date-icon"},"ðŸ“…",-1)),e("span",null,i(n.date),1),n.updatedDate&&n.updatedDate!==n.date?(l(),o(k,{key:0},[s[8]||(s[8]=e("span",{class:"date-separator"},"Â·",-1)),e("span",Ge,i(u(h)("article.updated"))+": "+i(n.updatedDate),1)],64)):b("",!0)]),e("h3",{class:"timeline-title",innerHTML:n.highlightedTitle||n.title},null,8,et),n.description?(l(),o("p",{key:0,class:"timeline-description",innerHTML:n.highlightedDescription||n.description},null,8,tt)):b("",!0)])])],40,Qe))),128))])]))),128))]),$.value.length===0?(l(),o("div",st,[e("p",null,i(u(h)("search.noResults")),1)])):b("",!0)])),c.value==="list"?(l(),Q(he,{key:2,"current-page":m.value,"onUpdate:currentPage":s[2]||(s[2]=t=>m.value=t),"items-per-page":a.value,"onUpdate:itemsPerPage":s[3]||(s[3]=t=>a.value=t),"total-pages":Y.value,"total-items":I.value.length,"items-per-page-options":[5,10,20,50]},null,8,["current-page","items-per-page","total-pages","total-items"])):b("",!0)])])]))}}),dt=F(at,[["__scopeId","data-v-2678b447"]]);export{dt as default};
