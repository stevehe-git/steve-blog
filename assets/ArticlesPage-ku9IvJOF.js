import{r as T,c as k,d as L,u as N,a as d,b as e,j as C,t as u,g as $,e as h,F as x,h as D,i as g,w as B,k as F,l as H,v as U,m as j,p as A,q as z,s as E,f as O}from"./vue-vendor-D3XWct0c.js";import{a as Q}from"./index-P_wY3oj_.js";import{u as G}from"./useCategories-BYgl4rKb.js";import{g as J}from"./coverStyle-BhxAb7xK.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./math-vendor-Aurp2zBA.js";import"./markdown-vendor-BDlm1NQN.js";const W=i=>{const p=T(""),f=(n,c)=>{if(!c.trim())return n;const w=new RegExp(`(${c})`,"gi");return n.replace(w,"<mark>$1</mark>")},v=k(()=>{const n=p.value.trim().toLowerCase();return n?i.filter(c=>[c.title,c.description,c.content,c.tag,c.categoryKey].join(" ").toLowerCase().includes(n)):i}),r=k(()=>{const n=p.value.trim();return n?v.value.map(c=>({...c,highlightedTitle:f(c.title,n),highlightedDescription:f(c.description,n)})):[]});return{searchQuery:p,searchResults:v,highlightedResults:r,clearSearch:()=>{p.value=""}}},X={class:"pagination"},Y={class:"pagination-controls"},Z={key:0,class:"total-items"},ee={key:1,class:"pagination-buttons"},te=["disabled"],se={class:"page-numbers"},ae=["disabled","onClick"],ne=["disabled"],oe={class:"items-per-page"},le=["value"],ie=["value"],re=L({__name:"Pagination",props:{currentPage:{default:1},totalPages:{default:1},totalItems:{default:0},itemsPerPage:{default:5},itemsPerPageOptions:{default:()=>[5,10,20,50]}},emits:["update:currentPage","update:itemsPerPage","page-change"],setup(i,{emit:p}){const{t:f}=N(),v=i,r=p,b=k(()=>{const t=[],m=v.totalPages,l=v.currentPage;if(m<=7)for(let o=1;o<=m;o++)t.push(o);else if(l<=3){for(let o=1;o<=4;o++)t.push(o);t.push("..."),t.push(m)}else if(l>=m-2){t.push(1),t.push("...");for(let o=m-3;o<=m;o++)t.push(o)}else{t.push(1),t.push("...");for(let o=l-1;o<=l+1;o++)t.push(o);t.push("..."),t.push(m)}return t}),n=t=>{typeof t=="number"&&t>=1&&t<=v.totalPages&&(r("update:currentPage",t),r("page-change",t),window.scrollTo({top:0,behavior:"smooth"}))},c=()=>{if(v.currentPage>1){const t=v.currentPage-1;r("update:currentPage",t),r("page-change",t),window.scrollTo({top:0,behavior:"smooth"})}},w=()=>{if(v.currentPage<v.totalPages){const t=v.currentPage+1;r("update:currentPage",t),r("page-change",t),window.scrollTo({top:0,behavior:"smooth"})}},y=t=>{const m=t.target,l=parseInt(m.value,10);r("update:itemsPerPage",l),r("update:currentPage",1),r("page-change",1),window.scrollTo({top:0,behavior:"smooth"})};return(t,m)=>(g(),d("div",X,[e("div",Y,[i.totalItems>0?(g(),d("div",Z," å…± "+u(i.totalItems)+" æ¡ ",1)):C("",!0),i.totalPages>1?(g(),d("div",ee,[e("button",{class:$(["page-btn",{disabled:i.currentPage===1}]),disabled:i.currentPage===1,onClick:c},u(h(f)("pagination.prev")),11,te),e("div",se,[(g(!0),d(x,null,D(b.value,l=>(g(),d("button",{key:l,class:$(["page-number",{active:l===i.currentPage,ellipsis:l==="..."}]),disabled:l==="...",onClick:o=>n(l)},u(l),11,ae))),128))]),e("button",{class:$(["page-btn",{disabled:i.currentPage===i.totalPages}]),disabled:i.currentPage===i.totalPages,onClick:w},u(h(f)("pagination.next")),11,ne)])):C("",!0),e("div",oe,[e("select",{value:i.itemsPerPage,class:"items-per-page-select",onChange:y},[(g(!0),d(x,null,D(i.itemsPerPageOptions,l=>(g(),d("option",{key:l,value:l},u(l)+" / page ",9,ie))),128))],40,le)])])]))}}),ce=S(re,[["__scopeId","data-v-6c653ad1"]]),ue={class:"layout"},de={class:"content"},ge={class:"sidebar"},he={class:"filter-title"},pe={class:"category-list"},ve=["onClick"],me={class:"article-area"},Pe={class:"search-section"},_e={class:"search-box"},fe=["placeholder"],be={class:"list-header"},ye={class:"article-count"},ke={key:0,class:"search-hint"},we={class:"header-actions"},Ce={class:"articles"},Te=["onClick","onKeyup"],$e={key:0,class:"badge"},xe={class:"card-body"},De={class:"tag-row"},Ie={class:"tag"},Re=["innerHTML"],Ae=["innerHTML"],Le={class:"meta"},Ne={key:0,class:"empty-state"},Se=L({__name:"ArticlesPage",setup(i){const{t:p}=N(),f=z(),{categories:v}=G(!0),r=T("all"),b=T(!0),{searchQuery:n,searchResults:c,highlightedResults:w}=W(Q),y=T(5),t=T(1),m=P=>{f.push({name:"articleDetail",params:{id:P}})},l=()=>{f.push({name:"articleNew"})},o=k(()=>{let P=c.value;return r.value!=="all"&&(P=P.filter(a=>a.categoryKey===r.value)),P.slice().sort((a,s)=>{const _=new Date(a.date).getTime()-new Date(s.date).getTime();return b.value?-_:_})}),I=k(()=>{const P=n.value.trim();let a=o.value;return P&&(a=a.map(s=>{const _=w.value.find(q=>q.id===s.id);return _?{...s,highlightedTitle:_.highlightedTitle,highlightedDescription:_.highlightedDescription}:s})),a}),M=k(()=>{const P=(t.value-1)*y.value,a=P+y.value;return I.value.slice(P,a)}),K=k(()=>Math.ceil(I.value.length/y.value)),R=()=>{t.value=1};B([n,r,b],()=>{R()});const V=()=>{b.value=!b.value,R()};return(P,a)=>(g(),d("main",ue,[e("section",de,[e("aside",ge,[e("div",he,[a[4]||(a[4]=e("span",{class:"filter-icon"},"âŒ˜",-1)),e("span",null,u(h(p)("filter.category")),1)]),e("div",pe,[(g(!0),d(x,null,D(h(v),s=>(g(),d("button",{key:s.key,class:$(["category-item",{active:r.value===s.key}]),type:"button",onClick:_=>{r.value=s.key,R()}},u(s.label),11,ve))),128))])]),e("section",me,[e("div",Pe,[e("div",_e,[a[5]||(a[5]=e("span",{class:"search-icon"},"ðŸ”",-1)),H(e("input",{"onUpdate:modelValue":a[0]||(a[0]=s=>j(n)?n.value=s:null),type:"text",class:"search-input",placeholder:h(p)("search.placeholder")},null,8,fe),[[U,h(n)]]),h(n)?(g(),d("button",{key:0,class:"clear-btn",type:"button",onClick:a[1]||(a[1]=s=>n.value="")}," Ã— ")):C("",!0)])]),e("div",be,[e("div",ye,[A(u(h(p)("articles.count",{count:o.value.length}))+" ",1),h(n)?(g(),d("span",ke,u(h(p)("search.results",{query:h(n)})),1)):C("",!0)]),e("div",we,[e("button",{class:"new-article-btn",type:"button",onClick:l}," + "+u(h(p)("article.new")),1),e("button",{class:"sort-btn",type:"button",onClick:V},[A(u(h(p)("actions.sortByTime"))+" ",1),e("span",{class:$(["arrow",{rotated:!b.value}])},"âŒ„",2)])])]),e("div",Ce,[(g(!0),d(x,null,D(M.value,s=>(g(),d("article",{key:s.id,class:"article-card",role:"button",tabindex:"0",onClick:_=>m(s.id),onKeyup:E(_=>m(s.id),["enter"])},[e("div",{class:"card-cover",style:O(h(J)(s.cover))},[s.badge?(g(),d("span",$e,u(s.badge),1)):C("",!0)],4),e("div",xe,[e("div",De,[e("span",Ie,u(s.tag),1)]),e("span",{class:"title",innerHTML:s.highlightedTitle||s.title},null,8,Re),e("p",{class:"description",innerHTML:s.highlightedDescription||s.description},null,8,Ae),e("div",Le,[e("span",null,u(s.date),1),a[6]||(a[6]=e("span",{class:"dot"},"Â·",-1)),e("span",null,u(s.platform),1)])])],40,Te))),128)),o.value.length===0?(g(),d("div",Ne,[e("p",null,u(h(p)("search.noResults")),1)])):C("",!0)]),F(ce,{"current-page":t.value,"onUpdate:currentPage":a[2]||(a[2]=s=>t.value=s),"items-per-page":y.value,"onUpdate:itemsPerPage":a[3]||(a[3]=s=>y.value=s),"total-pages":K.value,"total-items":I.value.length,"items-per-page-options":[5,10,20,50]},null,8,["current-page","items-per-page","total-pages","total-items"])])])]))}}),Ue=S(Se,[["__scopeId","data-v-e31b66c9"]]);export{Ue as default};
