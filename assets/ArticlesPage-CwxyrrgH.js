import{r as D,c as P,d as B,u as E,a as l,b as e,j as b,t as i,g as L,e as d,F as C,h as x,i as o,w as W,k as X,l as Z,v as G,m as ee,p as K,q as te,s as S,f as V}from"./vue-vendor-D3XWct0c.js";import{a as H}from"./index-C2FlrJs6.js";import{u as se}from"./useCategories-BYgl4rKb.js";import{g as Y}from"./coverStyle-BhxAb7xK.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./math-vendor-MMnQjQw3.js";import"./markdown-vendor-BDlm1NQN.js";const ae=p=>{const h=D(""),w=(_,r)=>{if(!r.trim())return _;const $=new RegExp(`(${r})`,"gi");return _.replace($,"<mark>$1</mark>")},y=P(()=>{const _=h.value.trim().toLowerCase();return _?p.filter(r=>[r.title,r.description,r.content,r.tag,r.categoryKey].join(" ").toLowerCase().includes(_)):p}),v=P(()=>{const _=h.value.trim();return _?y.value.map(r=>({...r,highlightedTitle:w(r.title,_),highlightedDescription:w(r.description,_)})):[]});return{searchQuery:h,searchResults:y,highlightedResults:v,clearSearch:()=>{h.value=""}}},ne={class:"pagination"},le={class:"pagination-controls"},oe={key:0,class:"total-items"},ie={key:1,class:"pagination-buttons"},re=["disabled"],ce={class:"page-numbers"},ue=["disabled","onClick"],de=["disabled"],ge={class:"items-per-page"},he=["value"],pe=["value"],ve=B({__name:"Pagination",props:{currentPage:{default:1},totalPages:{default:1},totalItems:{default:0},itemsPerPage:{default:5},itemsPerPageOptions:{default:()=>[5,10,20,50]}},emits:["update:currentPage","update:itemsPerPage","page-change"],setup(p,{emit:h}){const{t:w}=E(),y=p,v=h,N=P(()=>{const a=[],m=y.totalPages,c=y.currentPage;if(m<=7)for(let g=1;g<=m;g++)a.push(g);else if(c<=3){for(let g=1;g<=4;g++)a.push(g);a.push("..."),a.push(m)}else if(c>=m-2){a.push(1),a.push("...");for(let g=m-3;g<=m;g++)a.push(g)}else{a.push(1),a.push("...");for(let g=c-1;g<=c+1;g++)a.push(g);a.push("..."),a.push(m)}return a}),_=a=>{typeof a=="number"&&a>=1&&a<=y.totalPages&&(v("update:currentPage",a),v("page-change",a),window.scrollTo({top:0,behavior:"smooth"}))},r=()=>{if(y.currentPage>1){const a=y.currentPage-1;v("update:currentPage",a),v("page-change",a),window.scrollTo({top:0,behavior:"smooth"})}},$=()=>{if(y.currentPage<y.totalPages){const a=y.currentPage+1;v("update:currentPage",a),v("page-change",a),window.scrollTo({top:0,behavior:"smooth"})}},I=a=>{const m=a.target,c=parseInt(m.value,10);v("update:itemsPerPage",c),v("update:currentPage",1),v("page-change",1),window.scrollTo({top:0,behavior:"smooth"})};return(a,m)=>(o(),l("div",ne,[e("div",le,[p.totalItems>0?(o(),l("div",oe," å…± "+i(p.totalItems)+" æ¡ ",1)):b("",!0),p.totalPages>1?(o(),l("div",ie,[e("button",{class:L(["page-btn",{disabled:p.currentPage===1}]),disabled:p.currentPage===1,onClick:r},i(d(w)("pagination.prev")),11,re),e("div",ce,[(o(!0),l(C,null,x(N.value,c=>(o(),l("button",{key:c,class:L(["page-number",{active:c===p.currentPage,ellipsis:c==="..."}]),disabled:c==="...",onClick:g=>_(c)},i(c),11,ue))),128))]),e("button",{class:L(["page-btn",{disabled:p.currentPage===p.totalPages}]),disabled:p.currentPage===p.totalPages,onClick:$},i(d(w)("pagination.next")),11,de)])):b("",!0),e("div",ge,[e("select",{value:p.itemsPerPage,class:"items-per-page-select",onChange:I},[(o(!0),l(C,null,x(p.itemsPerPageOptions,c=>(o(),l("option",{key:c,value:c},i(c)+" / page ",9,pe))),128))],40,he)])])]))}}),_e=F(ve,[["__scopeId","data-v-6c653ad1"]]),me={class:"layout"},ye={class:"content"},be={class:"sidebar"},fe={class:"filter-title"},Pe={class:"category-list"},ke=["onClick"],we={class:"category-label"},Ce={class:"category-count"},Te={class:"article-area"},$e={class:"search-section"},De={class:"search-box"},xe=["placeholder"],Me={class:"list-header"},Le={class:"article-count"},Ne={key:0,class:"search-hint"},Ae={class:"header-actions"},Ie=["title"],Re={key:0},He={key:1},Ke={key:0,class:"articles"},Se=["onClick","onKeyup"],Ve={key:0,class:"badge"},Ye={class:"card-body"},Be={class:"tag-row"},Ee={class:"tag"},Fe=["innerHTML"],je=["innerHTML"],qe={class:"meta"},Oe={key:0,class:"empty-state"},Ue={key:1,class:"timeline-view"},ze={class:"timeline-container"},Qe={class:"timeline-year-node"},Je={class:"year-circle"},We={class:"timeline-articles"},Xe=["onClick","onKeyup"],Ze={class:"timeline-content"},Ge={key:0,class:"timeline-badge"},et={class:"timeline-info"},tt={class:"timeline-date"},st={class:"updated-date"},at=["innerHTML"],nt=["innerHTML"],lt={key:0,class:"empty-state"},ot=B({__name:"ArticlesPage",setup(p){const{t:h}=E(),w=te(),{categories:y}=se(!0),v=D("all"),N=P(()=>{const u={};return u.all=H.length,y.value.forEach(s=>{s.key!=="all"&&(u[s.key]=H.filter(t=>t.categoryKey===s.key).length)}),u}),_=D(!0),{searchQuery:r,searchResults:$,highlightedResults:I}=ae(H),a=D(5),m=D(1),c=D("list"),g=u=>{w.push({name:"articleDetail",params:{id:u}})},j=()=>{w.push({name:"articleNew"})},M=P(()=>{let u=$.value;return v.value!=="all"&&(u=u.filter(s=>s.categoryKey===v.value)),u.slice().sort((s,t)=>{const n=new Date(s.date).getTime()-new Date(t.date).getTime();return _.value?-n:n})}),R=P(()=>{const u=r.value.trim();let s=M.value;return u&&(s=s.map(t=>{const n=I.value.find(k=>k.id===t.id);return n?{...t,highlightedTitle:n.highlightedTitle,highlightedDescription:n.highlightedDescription}:t})),s}),q=P(()=>{const u=(m.value-1)*a.value,s=u+a.value;return R.value.slice(u,s)}),O=P(()=>Math.ceil(R.value.length/a.value)),A=()=>{m.value=1};W([r,v,_],()=>{A()});const U=()=>{_.value=!_.value,A()},z=()=>{c.value=c.value==="list"?"timeline":"list",A()},Q=P(()=>{const u={};return M.value.forEach(t=>{const n=new Date(t.date).getFullYear().toString();u[n]||(u[n]=[]),u[n].push(t)}),Object.keys(u).sort((t,n)=>Number(n)-Number(t)).map(t=>({year:t,articles:u[t]}))}),J=P(()=>{const u=Q.value.flatMap(f=>(f.articles||[]).map(T=>({...T,year:f.year}))),s=(m.value-1)*a.value,t=s+a.value,n=u.slice(s,t),k={};return n.forEach(f=>{const T=f.year;k[T]||(k[T]=[]),k[T].push(f)}),Object.keys(k).sort((f,T)=>Number(T)-Number(f)).map(f=>({year:f,articles:k[f]||[]}))});return(u,s)=>(o(),l("main",me,[e("section",ye,[e("aside",be,[e("div",fe,[s[4]||(s[4]=e("span",{class:"filter-icon"},"âŒ˜",-1)),e("span",null,i(d(h)("filter.category")),1)]),e("div",Pe,[(o(!0),l(C,null,x(d(y),t=>(o(),l("button",{key:t.key,class:L(["category-item",{active:v.value===t.key}]),type:"button",onClick:n=>{v.value=t.key,A()}},[e("span",we,i(t.label),1),e("span",Ce,"("+i(N.value[t.key]||0)+")",1)],10,ke))),128))])]),e("section",Te,[e("div",$e,[e("div",De,[s[5]||(s[5]=e("span",{class:"search-icon"},"ðŸ”",-1)),Z(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>ee(r)?r.value=t:null),type:"text",class:"search-input",placeholder:d(h)("search.placeholder")},null,8,xe),[[G,d(r)]]),d(r)?(o(),l("button",{key:0,class:"clear-btn",type:"button",onClick:s[1]||(s[1]=t=>r.value="")}," Ã— ")):b("",!0)])]),e("div",Me,[e("div",Le,[K(i(d(h)("articles.count",{count:M.value.length}))+" ",1),d(r)?(o(),l("span",Ne,i(d(h)("search.results",{query:d(r)})),1)):b("",!0)]),e("div",Ae,[e("button",{class:"view-toggle-btn",type:"button",onClick:z,title:c.value==="list"?d(h)("actions.timelineView"):d(h)("actions.listView")},[c.value==="list"?(o(),l("span",Re,"ðŸ“…")):(o(),l("span",He,"ðŸ“‹"))],8,Ie),e("button",{class:"new-article-btn",type:"button",onClick:j}," + "+i(d(h)("article.new")),1),e("button",{class:"sort-btn",type:"button",onClick:U},[K(i(d(h)("actions.sortByTime"))+" ",1),e("span",{class:L(["arrow",{rotated:!_.value}])},"âŒ„",2)])])]),c.value==="list"?(o(),l("div",Ke,[(o(!0),l(C,null,x(q.value,t=>(o(),l("article",{key:t.id,class:"article-card",role:"button",tabindex:"0",onClick:n=>g(t.id),onKeyup:S(n=>g(t.id),["enter"])},[e("div",{class:"card-cover",style:V(d(Y)(t.cover))},[t.badge?(o(),l("span",Ve,i(t.badge),1)):b("",!0)],4),e("div",Ye,[e("div",Be,[e("span",Ee,i(t.tag),1)]),e("span",{class:"title",innerHTML:t.highlightedTitle||t.title},null,8,Fe),e("p",{class:"description",innerHTML:t.highlightedDescription||t.description},null,8,je),e("div",qe,[e("span",null,i(d(h)("article.created"))+": "+i(t.date),1),t.updatedDate?(o(),l(C,{key:0},[s[6]||(s[6]=e("span",{class:"dot"},"Â·",-1)),e("span",null,i(d(h)("article.updated"))+": "+i(t.updatedDate),1)],64)):b("",!0),s[7]||(s[7]=e("span",{class:"dot"},"Â·",-1)),e("span",null,i(t.platform),1)])])],40,Se))),128)),M.value.length===0?(o(),l("div",Oe,[e("p",null,i(d(h)("search.noResults")),1)])):b("",!0)])):(o(),l("div",Ue,[e("div",ze,[s[11]||(s[11]=e("div",{class:"timeline-line"},null,-1)),(o(!0),l(C,null,x(J.value,t=>(o(),l("div",{key:t.year,class:"timeline-year-group"},[e("div",Qe,[e("div",Je,i(t.year),1)]),e("div",We,[(o(!0),l(C,null,x(t.articles,n=>(o(),l("article",{key:n.id,class:"timeline-article",role:"button",tabindex:"0",onClick:k=>g(n.id),onKeyup:S(k=>g(n.id),["enter"])},[s[10]||(s[10]=e("div",{class:"timeline-dot"},null,-1)),e("div",Ze,[e("div",{class:"timeline-thumbnail",style:V(d(Y)(n.cover))},[n.badge?(o(),l("span",Ge,i(n.badge),1)):b("",!0)],4),e("div",et,[e("div",tt,[s[9]||(s[9]=e("span",{class:"date-icon"},"ðŸ“…",-1)),e("span",null,i(n.date),1),n.updatedDate&&n.updatedDate!==n.date?(o(),l(C,{key:0},[s[8]||(s[8]=e("span",{class:"date-separator"},"Â·",-1)),e("span",st,i(d(h)("article.updated"))+": "+i(n.updatedDate),1)],64)):b("",!0)]),e("h3",{class:"timeline-title",innerHTML:n.highlightedTitle||n.title},null,8,at),n.description?(o(),l("p",{key:0,class:"timeline-description",innerHTML:n.highlightedDescription||n.description},null,8,nt)):b("",!0)])])],40,Xe))),128))])]))),128))]),M.value.length===0?(o(),l("div",lt,[e("p",null,i(d(h)("search.noResults")),1)])):b("",!0)])),X(_e,{"current-page":m.value,"onUpdate:currentPage":s[2]||(s[2]=t=>m.value=t),"items-per-page":a.value,"onUpdate:itemsPerPage":s[3]||(s[3]=t=>a.value=t),"total-pages":O.value,"total-items":R.value.length,"items-per-page-options":[5,10,20,50]},null,8,["current-page","items-per-page","total-pages","total-items"])])])]))}}),vt=F(ot,[["__scopeId","data-v-f104ef0c"]]);export{vt as default};
