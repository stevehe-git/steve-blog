import{r as w,c as y,d as S,u as K,a as g,b as e,j as b,t as l,g as C,e as d,F as T,h as x,i as h,w as H,k as E,l as U,v as j,m as z,p as N,q as O,s as Q,f as G}from"./vue-vendor-D3XWct0c.js";import{a as L}from"./index-CWFziNGt.js";import{u as J}from"./useCategories-BYgl4rKb.js";import{g as W}from"./coverStyle-BhxAb7xK.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./math-vendor-Cgma4Kwt.js";import"./markdown-vendor-BDlm1NQN.js";const X=i=>{const p=w(""),f=(u,n)=>{if(!n.trim())return u;const k=new RegExp(`(${n})`,"gi");return u.replace(k,"<mark>$1</mark>")},P=y(()=>{const u=p.value.trim().toLowerCase();return u?i.filter(n=>[n.title,n.description,n.content,n.tag,n.categoryKey].join(" ").toLowerCase().includes(u)):i}),c=y(()=>{const u=p.value.trim();return u?P.value.map(n=>({...n,highlightedTitle:f(n.title,u),highlightedDescription:f(n.description,u)})):[]});return{searchQuery:p,searchResults:P,highlightedResults:c,clearSearch:()=>{p.value=""}}},Y={class:"pagination"},Z={class:"pagination-controls"},ee={key:0,class:"total-items"},te={key:1,class:"pagination-buttons"},se=["disabled"],ae={class:"page-numbers"},ne=["disabled","onClick"],oe=["disabled"],le={class:"items-per-page"},re=["value"],ie=["value"],ce=S({__name:"Pagination",props:{currentPage:{default:1},totalPages:{default:1},totalItems:{default:0},itemsPerPage:{default:5},itemsPerPageOptions:{default:()=>[5,10,20,50]}},emits:["update:currentPage","update:itemsPerPage","page-change"],setup(i,{emit:p}){const{t:f}=K(),P=i,c=p,$=y(()=>{const s=[],v=P.totalPages,o=P.currentPage;if(v<=7)for(let r=1;r<=v;r++)s.push(r);else if(o<=3){for(let r=1;r<=4;r++)s.push(r);s.push("..."),s.push(v)}else if(o>=v-2){s.push(1),s.push("...");for(let r=v-3;r<=v;r++)s.push(r)}else{s.push(1),s.push("...");for(let r=o-1;r<=o+1;r++)s.push(r);s.push("..."),s.push(v)}return s}),u=s=>{typeof s=="number"&&s>=1&&s<=P.totalPages&&(c("update:currentPage",s),c("page-change",s),window.scrollTo({top:0,behavior:"smooth"}))},n=()=>{if(P.currentPage>1){const s=P.currentPage-1;c("update:currentPage",s),c("page-change",s),window.scrollTo({top:0,behavior:"smooth"})}},k=()=>{if(P.currentPage<P.totalPages){const s=P.currentPage+1;c("update:currentPage",s),c("page-change",s),window.scrollTo({top:0,behavior:"smooth"})}},D=s=>{const v=s.target,o=parseInt(v.value,10);c("update:itemsPerPage",o),c("update:currentPage",1),c("page-change",1),window.scrollTo({top:0,behavior:"smooth"})};return(s,v)=>(h(),g("div",Y,[e("div",Z,[i.totalItems>0?(h(),g("div",ee," å…± "+l(i.totalItems)+" æ¡ ",1)):b("",!0),i.totalPages>1?(h(),g("div",te,[e("button",{class:C(["page-btn",{disabled:i.currentPage===1}]),disabled:i.currentPage===1,onClick:n},l(d(f)("pagination.prev")),11,se),e("div",ae,[(h(!0),g(T,null,x($.value,o=>(h(),g("button",{key:o,class:C(["page-number",{active:o===i.currentPage,ellipsis:o==="..."}]),disabled:o==="...",onClick:r=>u(o)},l(o),11,ne))),128))]),e("button",{class:C(["page-btn",{disabled:i.currentPage===i.totalPages}]),disabled:i.currentPage===i.totalPages,onClick:k},l(d(f)("pagination.next")),11,oe)])):b("",!0),e("div",le,[e("select",{value:i.itemsPerPage,class:"items-per-page-select",onChange:D},[(h(!0),g(T,null,x(i.itemsPerPageOptions,o=>(h(),g("option",{key:o,value:o},l(o)+" / page ",9,ie))),128))],40,re)])])]))}}),ue=M(ce,[["__scopeId","data-v-6c653ad1"]]),de={class:"layout"},ge={class:"content"},he={class:"sidebar"},pe={class:"filter-title"},ve={class:"category-list"},me=["onClick"],Pe={class:"category-label"},_e={class:"category-count"},fe={class:"article-area"},ye={class:"search-section"},be={class:"search-box"},ke=["placeholder"],we={class:"list-header"},Ce={class:"article-count"},Te={key:0,class:"search-hint"},$e={class:"header-actions"},xe={class:"articles"},De=["onClick","onKeyup"],Ie={key:0,class:"badge"},Re={class:"card-body"},Ae={class:"tag-row"},Le={class:"tag"},Ne=["innerHTML"],Se=["innerHTML"],Ke={class:"meta"},Me={key:0,class:"empty-state"},Ve=S({__name:"ArticlesPage",setup(i){const{t:p}=K(),f=O(),{categories:P}=J(!0),c=w("all"),$=y(()=>{const m={};return m.all=L.length,P.value.forEach(a=>{a.key!=="all"&&(m[a.key]=L.filter(t=>t.categoryKey===a.key).length)}),m}),u=w(!0),{searchQuery:n,searchResults:k,highlightedResults:D}=X(L),s=w(5),v=w(1),o=m=>{f.push({name:"articleDetail",params:{id:m}})},r=()=>{f.push({name:"articleNew"})},I=y(()=>{let m=k.value;return c.value!=="all"&&(m=m.filter(a=>a.categoryKey===c.value)),m.slice().sort((a,t)=>{const _=new Date(a.date).getTime()-new Date(t.date).getTime();return u.value?-_:_})}),R=y(()=>{const m=n.value.trim();let a=I.value;return m&&(a=a.map(t=>{const _=D.value.find(F=>F.id===t.id);return _?{...t,highlightedTitle:_.highlightedTitle,highlightedDescription:_.highlightedDescription}:t})),a}),V=y(()=>{const m=(v.value-1)*s.value,a=m+s.value;return R.value.slice(m,a)}),q=y(()=>Math.ceil(R.value.length/s.value)),A=()=>{v.value=1};H([n,c,u],()=>{A()});const B=()=>{u.value=!u.value,A()};return(m,a)=>(h(),g("main",de,[e("section",ge,[e("aside",he,[e("div",pe,[a[4]||(a[4]=e("span",{class:"filter-icon"},"âŒ˜",-1)),e("span",null,l(d(p)("filter.category")),1)]),e("div",ve,[(h(!0),g(T,null,x(d(P),t=>(h(),g("button",{key:t.key,class:C(["category-item",{active:c.value===t.key}]),type:"button",onClick:_=>{c.value=t.key,A()}},[e("span",Pe,l(t.label),1),e("span",_e,"("+l($.value[t.key]||0)+")",1)],10,me))),128))])]),e("section",fe,[e("div",ye,[e("div",be,[a[5]||(a[5]=e("span",{class:"search-icon"},"ðŸ”",-1)),U(e("input",{"onUpdate:modelValue":a[0]||(a[0]=t=>z(n)?n.value=t:null),type:"text",class:"search-input",placeholder:d(p)("search.placeholder")},null,8,ke),[[j,d(n)]]),d(n)?(h(),g("button",{key:0,class:"clear-btn",type:"button",onClick:a[1]||(a[1]=t=>n.value="")}," Ã— ")):b("",!0)])]),e("div",we,[e("div",Ce,[N(l(d(p)("articles.count",{count:I.value.length}))+" ",1),d(n)?(h(),g("span",Te,l(d(p)("search.results",{query:d(n)})),1)):b("",!0)]),e("div",$e,[e("button",{class:"new-article-btn",type:"button",onClick:r}," + "+l(d(p)("article.new")),1),e("button",{class:"sort-btn",type:"button",onClick:B},[N(l(d(p)("actions.sortByTime"))+" ",1),e("span",{class:C(["arrow",{rotated:!u.value}])},"âŒ„",2)])])]),e("div",xe,[(h(!0),g(T,null,x(V.value,t=>(h(),g("article",{key:t.id,class:"article-card",role:"button",tabindex:"0",onClick:_=>o(t.id),onKeyup:Q(_=>o(t.id),["enter"])},[e("div",{class:"card-cover",style:G(d(W)(t.cover))},[t.badge?(h(),g("span",Ie,l(t.badge),1)):b("",!0)],4),e("div",Re,[e("div",Ae,[e("span",Le,l(t.tag),1)]),e("span",{class:"title",innerHTML:t.highlightedTitle||t.title},null,8,Ne),e("p",{class:"description",innerHTML:t.highlightedDescription||t.description},null,8,Se),e("div",Ke,[e("span",null,l(d(p)("article.created"))+": "+l(t.date),1),t.updatedDate?(h(),g(T,{key:0},[a[6]||(a[6]=e("span",{class:"dot"},"Â·",-1)),e("span",null,l(d(p)("article.updated"))+": "+l(t.updatedDate),1)],64)):b("",!0),a[7]||(a[7]=e("span",{class:"dot"},"Â·",-1)),e("span",null,l(t.platform),1)])])],40,De))),128)),I.value.length===0?(h(),g("div",Me,[e("p",null,l(d(p)("search.noResults")),1)])):b("",!0)]),E(ue,{"current-page":v.value,"onUpdate:currentPage":a[2]||(a[2]=t=>v.value=t),"items-per-page":s.value,"onUpdate:itemsPerPage":a[3]||(a[3]=t=>s.value=t),"total-pages":q.value,"total-items":R.value.length,"items-per-page-options":[5,10,20,50]},null,8,["current-page","items-per-page","total-pages","total-items"])])])]))}}),ze=M(Ve,[["__scopeId","data-v-8572bbaf"]]);export{ze as default};
