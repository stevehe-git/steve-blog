import{r as w,c as P,d as N,u as S,a as v,j as C,b as e,g as T,t as d,e as r,F as D,h as R,i as _,w as F,k as H,l as I,v as j,m as z,p as L,q as E,s as Q,f as U}from"./vue-vendor-D3XWct0c.js";import{a as G}from"./index-BdOlOtKf.js";import{u as J}from"./useCategories-BYgl4rKb.js";import{g as O}from"./coverStyle-BhxAb7xK.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./math-vendor-BJhtL3Ts.js";import"./markdown-vendor-BDlm1NQN.js";const W=h=>{const i=w(""),b=(n,l)=>{if(!l.trim())return n;const k=new RegExp(`(${l})`,"gi");return n.replace(k,"<mark>$1</mark>")},g=P(()=>{const n=i.value.trim().toLowerCase();return n?h.filter(l=>[l.title,l.description,l.content,l.tag,l.categoryKey].join(" ").toLowerCase().includes(n)):h}),c=P(()=>{const n=i.value.trim();return n?g.value.map(l=>({...l,highlightedTitle:b(l.title,n),highlightedDescription:b(l.description,n)})):[]});return{searchQuery:i,searchResults:g,highlightedResults:c,clearSearch:()=>{i.value=""}}},X={key:0,class:"pagination"},Y=["disabled"],Z={class:"page-numbers"},ee=["disabled","onClick"],te=["disabled"],se=N({__name:"Pagination",props:{currentPage:{default:1},totalPages:{default:1}},emits:["update:currentPage","page-change"],setup(h,{emit:i}){const{t:b}=S(),g=h,c=i,y=P(()=>{const t=[],p=g.totalPages,u=g.currentPage;if(p<=7)for(let o=1;o<=p;o++)t.push(o);else if(u<=3){for(let o=1;o<=4;o++)t.push(o);t.push("..."),t.push(p)}else if(u>=p-2){t.push(1),t.push("...");for(let o=p-3;o<=p;o++)t.push(o)}else{t.push(1),t.push("...");for(let o=u-1;o<=u+1;o++)t.push(o);t.push("..."),t.push(p)}return t}),n=t=>{typeof t=="number"&&t>=1&&t<=g.totalPages&&(c("update:currentPage",t),c("page-change",t),window.scrollTo({top:0,behavior:"smooth"}))},l=()=>{if(g.currentPage>1){const t=g.currentPage-1;c("update:currentPage",t),c("page-change",t),window.scrollTo({top:0,behavior:"smooth"})}},k=()=>{if(g.currentPage<g.totalPages){const t=g.currentPage+1;c("update:currentPage",t),c("page-change",t),window.scrollTo({top:0,behavior:"smooth"})}};return(t,p)=>h.totalPages>1?(_(),v("div",X,[e("button",{class:T(["page-btn",{disabled:h.currentPage===1}]),disabled:h.currentPage===1,onClick:l},d(r(b)("pagination.prev")),11,Y),e("div",Z,[(_(!0),v(D,null,R(y.value,u=>(_(),v("button",{key:u,class:T(["page-number",{active:u===h.currentPage,ellipsis:u==="..."}]),disabled:u==="...",onClick:o=>n(u)},d(u),11,ee))),128))]),e("button",{class:T(["page-btn",{disabled:h.currentPage===h.totalPages}]),disabled:h.currentPage===h.totalPages,onClick:k},d(r(b)("pagination.next")),11,te)])):C("",!0)}}),ae=M(se,[["__scopeId","data-v-afdb7ff0"]]),ne={class:"layout"},oe={class:"content"},le={class:"sidebar"},re={class:"filter-title"},ie={class:"category-list"},ce=["onClick"],ue={class:"article-area"},de={class:"search-section"},he={class:"search-box"},ge=["placeholder"],pe={class:"list-header"},ve={class:"article-count"},_e={key:0,class:"search-hint"},fe={class:"header-actions"},me={class:"articles"},be=["onClick","onKeyup"],ye={key:0,class:"badge"},Pe={class:"card-body"},ke={class:"tag-row"},we={class:"tag"},Ce=["innerHTML"],Te=["innerHTML"],xe={class:"meta"},$e={key:0,class:"empty-state"},De=N({__name:"ArticlesPage",setup(h){const{t:i}=S(),b=E(),{categories:g}=J(!0),c=w("all"),y=w(!0),{searchQuery:n,searchResults:l,highlightedResults:k}=W(G),t=w(1),p=w(1),u=f=>{b.push({name:"articleDetail",params:{id:f}})},o=()=>{b.push({name:"articleNew"})},x=P(()=>{let f=l.value;return c.value!=="all"&&(f=f.filter(a=>a.categoryKey===c.value)),f.slice().sort((a,s)=>{const m=new Date(a.date).getTime()-new Date(s.date).getTime();return y.value?-m:m})}),A=P(()=>{const f=n.value.trim();let a=x.value;return f&&(a=a.map(s=>{const m=k.value.find(B=>B.id===s.id);return m?{...s,highlightedTitle:m.highlightedTitle,highlightedDescription:m.highlightedDescription}:s})),a}),K=P(()=>{const f=(p.value-1)*t.value,a=f+t.value;return A.value.slice(f,a)}),V=P(()=>Math.ceil(A.value.length/t.value)),$=()=>{p.value=1};F([n,c,y],()=>{$()});const q=()=>{y.value=!y.value,$()};return(f,a)=>(_(),v("main",ne,[e("section",oe,[e("aside",le,[e("div",re,[a[3]||(a[3]=e("span",{class:"filter-icon"},"âŒ˜",-1)),e("span",null,d(r(i)("filter.category")),1)]),e("div",ie,[(_(!0),v(D,null,R(r(g),s=>(_(),v("button",{key:s.key,class:T(["category-item",{active:c.value===s.key}]),type:"button",onClick:m=>{c.value=s.key,$()}},d(s.label),11,ce))),128))])]),e("section",ue,[e("div",de,[e("div",he,[a[4]||(a[4]=e("span",{class:"search-icon"},"ðŸ”",-1)),I(e("input",{"onUpdate:modelValue":a[0]||(a[0]=s=>z(n)?n.value=s:null),type:"text",class:"search-input",placeholder:r(i)("search.placeholder")},null,8,ge),[[j,r(n)]]),r(n)?(_(),v("button",{key:0,class:"clear-btn",type:"button",onClick:a[1]||(a[1]=s=>n.value="")}," Ã— ")):C("",!0)])]),e("div",pe,[e("div",ve,[L(d(r(i)("articles.count",{count:x.value.length}))+" ",1),r(n)?(_(),v("span",_e,d(r(i)("search.results",{query:r(n)})),1)):C("",!0)]),e("div",fe,[e("button",{class:"new-article-btn",type:"button",onClick:o}," + "+d(r(i)("article.new")),1),e("button",{class:"sort-btn",type:"button",onClick:q},[L(d(r(i)("actions.sortByTime"))+" ",1),e("span",{class:T(["arrow",{rotated:!y.value}])},"âŒ„",2)])])]),e("div",me,[(_(!0),v(D,null,R(K.value,s=>(_(),v("article",{key:s.id,class:"article-card",role:"button",tabindex:"0",onClick:m=>u(s.id),onKeyup:Q(m=>u(s.id),["enter"])},[e("div",{class:"card-cover",style:U(r(O)(s.cover))},[s.badge?(_(),v("span",ye,d(s.badge),1)):C("",!0)],4),e("div",Pe,[e("div",ke,[e("span",we,d(s.tag),1)]),e("span",{class:"title",innerHTML:s.highlightedTitle||s.title},null,8,Ce),e("p",{class:"description",innerHTML:s.highlightedDescription||s.description},null,8,Te),e("div",xe,[e("span",null,d(s.date),1),a[5]||(a[5]=e("span",{class:"dot"},"Â·",-1)),e("span",null,d(s.platform),1)])])],40,be))),128)),x.value.length===0?(_(),v("div",$e,[e("p",null,d(r(i)("search.noResults")),1)])):C("",!0)]),H(ae,{"current-page":p.value,"onUpdate:currentPage":a[2]||(a[2]=s=>p.value=s),"total-pages":V.value},null,8,["current-page","total-pages"])])])]))}}),Ve=M(De,[["__scopeId","data-v-f567da16"]]);export{Ve as default};
